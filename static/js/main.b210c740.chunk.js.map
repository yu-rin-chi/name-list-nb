{"version":3,"sources":["js/App.js","index.js"],"names":["App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","clickHandler","loadUserId","catch","err","alert","loadUserWord","state","isLogin","departmentList","user","group","word","inputText","_this2","httpClient","axios","create","baseURL","withCredentials","loadAuth","then","loadDepartments","console","log","Promise","resolve","_this3","get","params","callback","commonResponseHandling","result","is_login","setState","auth_url","window","location","href","_this4","concat","_this5","query","res","debug","data","code","error","reject","message","e","target","value","_this6","react_default","a","createElement","className","class","type","onChange","handleTextChange","onClick","user_name","description","src","main_photo_url","alt","item_list","map","row","index","key","photo_url","Component","ReactDOM","render","js_App","document","getElementById"],"mappings":"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","file":"static/js/main.b210c740.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nclass App extends Component {\n  // httpClient:AxiosInstance;\n\n  constructor() {\n    super();\n\n    this.state = {\n      isLogin: false,\n      departmentList: [],\n      user: null,\n      group: null,\n      word:null,\n      inputText: null\n    };\n  }\n\n  componentDidMount() {\n    this.httpClient = axios.create({\n      baseURL: \"https://kadou.i.nijibox.net/api\",\n      withCredentials: true\n    });\n    this.loadAuth()\n      .then(() => {\n        if (!this.state.isLogin) {\n          console.log(\"then\");\n          return Promise.resolve();\n        }\n        return this.loadDepartments();\n      })\n      .catch(err => {\n        alert(\"APIがエラーを返しました\\n\\n\" + err);\n      });\n  }\n  loadAuth() {\n    console.log(\"auth\");\n    return this.httpClient\n      .get(\"/auth\", { params: { callback: \"http://localhost:3000\" } })\n      .then(this.commonResponseHandling)\n      .then(result => {\n        console.log(\"result\", result);\n        if (result.is_login) {\n          console.log(\"login\");\n          this.setState({ isLogin: true });\n        } else if (result.auth_url) {\n          window.location.href = result.auth_url;\n        }\n      });\n  }\n\n  // loadDepartments(num) {\n  //   console.log(\"dep\");\n  //   return this.httpClient\n  //     .get(`/who/seach/department_id=${num}/`)\n  //     // .get(/who/seach/{ params: { query: inputText } })\n  //     .then(this.commonResponseHandling)\n  //     .then(result => {\n  //       this.setState({ departmentList: result });\n  //       console.log(this.state.departmentList);\n  //     });\n  // }\n\n  loadUserId(inputText) {\n    return this.httpClient\n      .get(`/who/seach/user/user_id=${inputText}/`)\n      .then(this.commonResponseHandling)\n      .then(result => {\n        console.log(\"---\");\n        console.log(result);\n        console.log(\"---\");\n        this.setState({ user: result });\n      });\n  }\n\n  // loadAllUser(inputText) {\n  //   return this.httpClient\n  //     .get(\"/who/search\",{ params: { query: inputText } })\n  //     .then(this.commonResponseHandling)\n  //     .then(result => {\n  //       this.setState({ user: result });\n  //       console.log(this.state.user);\n  //     });\n  // }\n\n\n  // クエリ検索の関数\n  loadUserWord(inputText) {\n    return this.httpClient\n      .get(\"/who/search/\", { params: { query: inputText } })\n      .then(this.commonResponseHandling)\n      .then(result => {\n        console.log(\"---\");\n        console.log(result);\n        console.log(\"---\");\n        this.setState({ group: result });\n        \n      });\n  }\n\n  commonResponseHandling(res) {\n    console.debug(res);\n    if (res.data.code !== \"200\") {\n      console.error(res.data.data);\n      return Promise.reject(\"API Error:\" + res.data.data.message);\n    }\n    return Promise.resolve(res.data.data);\n  }\n\n  clickHandler = () => {\n      this.loadUserId().catch(err => {\n      alert(\"エラー発生\");\n\n    this.loadUserWord().catch(err => {\n      alert(\"エラー発生\");\n    });\n  \n    });\n  };\n\n\n\n  handleTextChange(e) {\n    console.log(e.target.value);\n    this.setState({\n      // テキスト入力の値\n      inputText : e.target.value\n    });\n      // input\n  }\n\n\n\n  render() {\n    console.log(\"render\");\n    // this.loadAllUser();\n    return (\n      <div className=\"App\">\n        {/* <select>\n          {this.state.departmentList.map((row, index) => {\n            return <option key={index}>{row.department_name}</option>;\n          })}\n        </select> */}\n\n        {this.state.isLogin ? (\n          \n          <div>\n          <h1></h1>\n            <form>\n              <input\n                 class=\"textbox\"\n                type=\"text\"\n                onChange={e => this.handleTextChange(e)}\n              />\n            </form>\n            <div class=\"btns\">\n            <button class=\"btn_number\" onClick={e => this.loadUserId(this.state.inputText)}>番号で表示</button>\n             <button class=\"btn_freeword\" onClick={e => this.loadUserWord(this.state.inputText)}>フリーワードで表示</button>\n             </div>\n            {this.state.user && (\n              <div>\n                {this.state.user.user_name}\n                <br />\n                {this.state.user.description}\n                <img src={this.state.user.main_photo_url} alt=\"\" />\n              </div>\n            )}\n            {/* クエリ検索の結果表示テスト */}\n            {this.state.group && (\n              <ul>\n                {this.state.group.item_list.map((row, index) => {\n                  return (\n                    <li key={index}>\n                      {row.user_name}\n                      <img src={row.photo_url} alt=\"test\" />\n                    </li>\n                  );\n                })}\n              </ul>\n            )}\n          </div>\n        ) : (\n          <p>未ログイン</p>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./css/main.css\";\nimport App from \"./js/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}